{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>{% block titlepage %}{% endblock %}</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<link rel="stylesheet" href="{% static 'css/dist/styles.css' %}">
		<script src= "https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.all.min.js" ></script>
		<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.min.css'>
		<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
	</head>
	<body class="flex flex-col min-h-screen">
		{% block navbar %}
		<div class="w-full text-white bg-black dark-mode:text-gray-200 dark-mode:bg-gray-800">
			<div x-data="{ open: false }" class="flex flex-col max-w-screen-xl px-4 mx-auto md:items-center md:justify-between md:flex-row md:px-6 lg:px-8">
				<div class="p-4 flex flex-row items-center justify-between">
					<a href="{% url 'inicio' %}" class="text-lg font-semibold tracking-widest text-yellow uppercase rounded-lg dark-mode:text-white focus:outline-none focus:shadow-outline">Alpha Gamer</a>
					<button class="md:hidden rounded-lg focus:outline-none focus:shadow-outline" @click="open = !open">
						<svg fill="currentColor" viewBox="0 0 20 20" class="w-6 h-6">
							<path x-show="!open" fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM9 15a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z" clip-rule="evenodd"></path>
							<path x-show="open" fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
						</svg>
					</button>
				</div>
				<nav :class="{'flex': open, 'hidden': !open}" class="flex-col flex-grow pb-4 md:pb-0 hidden md:flex md:justify-end md:flex-row">
					<a class="px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg dark-mode:bg-transparent dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 md:ml-4 hover:text-gray-900 focus:text-gray-900 hover:bg-yellow focus:bg-yellow focus:outline-none focus:shadow-outline" href="{% url 'inicio' %}">Inicio</a>
					<a class="px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg dark-mode:bg-transparent dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 md:ml-4 hover:text-gray-900 focus:text-gray-900 hover:bg-yellow focus:bg-yellow focus:outline-none focus:shadow-outline" href="{% url 'registrar' %}">Registro de tiempo</a>
					<a class="px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg dark-mode:bg-transparent dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 md:ml-4 hover:text-gray-900 focus:text-gray-900 hover:bg-yellow focus:bg-yellow focus:outline-none focus:shadow-outline" href="{% url 'lista' %}">Seguimiento de tiempo</a>
					<div @click.away="open = false" class="relative" x-data="{ open: false }">
						<button @click="open = !open" class="flex flex-row items-center w-full px-4 py-2 mt-2 text-sm font-semibold text-left bg-transparent rounded-lg dark-mode:bg-transparent dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:focus:bg-gray-600 dark-mode:hover:bg-gray-600 md:w-auto md:inline md:mt-0 md:ml-4 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline">
							<span>Menú</span>
							<svg fill="currentColor" viewBox="0 0 20 20" :class="{'rotate-180': open, 'rotate-0': !open}" class="inline w-4 h-4 mt-1 ml-1 transition-transform duration-200 transform md:-mt-1"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
						</button>
						<div x-show="open" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" class="absolute z-20 right-0 w-full mt-2 origin-top-right rounded-md shadow-lg md:w-48">
							<div class="px-2 py-2 bg-black rounded-md shadow dark-mode:bg-gray-800">
								<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg dark-mode:bg-transparent dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href="{% url 'reporte' %}">Reportes</a>
								{% if perms.managementime.add_user %}
								<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg dark-mode:bg-transparent dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href="{% url 'restore' %}">Copia de seguridad</a>
								{% endif %}
								<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg dark-mode:bg-transparent dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href="{% url 'ver_consolas' %}">Consolas</a>
								<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg dark-mode:bg-transparent dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href="{% url 'password_change' %}">Cambiar contraseña</a>
								{% if perms.managementime.add_user %}
								<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg dark-mode:bg-transparent dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href="{% url 'users' %}">Gestión de usuarios</a>
								{% endif %}
								{% if user.is_authenticated %}  
								<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-zinc-800 rounded-lg dark-mode:bg-transparent dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-red-500 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href="{% url 'logout' %}">
									<div class="flex">
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#ffff" d="M16 17v-3H9v-4h7V7l5 5l-5 5M14 2a2 2 0 0 1 2 2v2h-2V4H5v16h9v-2h2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9Z"/></svg>										<p class="block pl-4">Cerrar sesión</p>
									</div>
									</a>
								{% else %}
								<a class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-lg dark-mode:bg-transparent dark-mode:hover:bg-gray-600 dark-mode:focus:bg-gray-600 dark-mode:focus:text-white dark-mode:hover:text-white dark-mode:text-gray-200 md:mt-0 hover:text-gray-900 focus:text-gray-900 hover:bg-gray-200 focus:bg-gray-200 focus:outline-none focus:shadow-outline" href="{% url 'login' %}">Iniciar sesion</a>
								{% endif %}
							</div>
						</div>
					</div>    
				</nav>
			</div>
		</div>
		{% endblock navbar%}
		<div class="flex items-center">
			<h1 class=" my-8 mx-4 uppercase font-medium text-lg">{% block title %}{% endblock title%}</h1>
			<div class="self-center ml-4 flex items-baseline">
				<span id="btn-increase-font" class="icon-button pr-2 hover:cursor-pointer hover:text-yellow">
					<span class="material-icons">
						<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><title>Aumentar tamaño de fuente</title><path fill="currentColor" d="M2.61 19c.48 0 .91-.3 1.06-.75l1.01-2.83h5.65l.99 2.82c.16.46.59.76 1.07.76c.79 0 1.33-.79 1.05-1.52L9.19 6.17C8.93 5.47 8.25 5 7.5 5s-1.43.47-1.69 1.17L1.56 17.48c-.28.73.27 1.52 1.05 1.52zM7.44 7.6h.12l2.03 5.79H5.41L7.44 7.6zM15 12c0-.55.45-1 1-1h2V9c0-.55.45-1 1-1s1 .45 1 1v2h2c.55 0 1 .45 1 1s-.45 1-1 1h-2v2c0 .55-.45 1-1 1s-1-.45-1-1v-2h-2c-.55 0-1-.45-1-1z"/></svg>
					</span>
				</span>
				<span id="btn-decrease-font" class="icon-button hover:cursor-pointer hover:text-yellow">
					<span class="material-icons">
						<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><title>Disminuir tamaño de fuente</title><path fill="currentColor" d="M2.61 19c.48 0 .91-.3 1.06-.75l1.01-2.83h5.65l.99 2.82c.16.46.59.76 1.07.76c.79 0 1.33-.79 1.05-1.52L9.19 6.17C8.93 5.47 8.25 5 7.5 5s-1.43.47-1.69 1.17L1.56 17.48c-.28.73.27 1.52 1.05 1.52zM7.44 7.6h.12l2.03 5.79H5.41L7.44 7.6zM15 12c0-.55.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1h-6c-.55 0-1-.45-1-1z"/></svg>
					</span>
				</span>
			</div>
		</div>

		
		<main class="mx-4 flex-grow">
			{% block main %}
			
			{% endblock main%}
		</main>

		{% block footer %}
		<footer class="bg-black text-white py-6 px-16 flex-shrink-0">
			<div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
				<div class="text-sm font-bold">
					&copy; 2023 AlphaGamer | Todos los derechos reservados
				</div>
				<div class="flex flex-col md:flex md:flex-row items-center space-x-4">
					<a href="{% url 'inicio' %}" class="hover:text-gray-400 hover:underline underline-offset-2">Inicio</a>
					<a href="{% url 'terminos' %}" class="hover:text-gray-400 hover:underline underline-offset-2">Términos y condiciones</a>
					<a href="{% url 'ayuda' %}" class="hover:text-gray-400 hover:underline underline-offset-2">Ayuda</a>
				</div>
			</div>
		</footer>
		{% endblock footer %}

		{% block style %}
		{% endblock style %}
		
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				var increaseBtn = document.getElementById('btn-increase-font');
				var decreaseBtn = document.getElementById('btn-decrease-font');
				var html = document.documentElement;
		
				// Función para guardar el tamaño de fuente en el almacenamiento local
				function saveFontSize(fontSize) {
					localStorage.setItem('fontSize', fontSize);
				}
		
				// Función para cargar el tamaño de fuente desde el almacenamiento local
				function loadFontSize() {
					var savedFontSize = localStorage.getItem('fontSize');
					if (savedFontSize) {
						html.style.fontSize = savedFontSize + 'px';
					}
				}
		
				// Obtener el tamaño de fuente original
				var originalFontSize = parseFloat(window.getComputedStyle(html).fontSize);
		
				// Cargar el tamaño de fuente al cargar la página
				loadFontSize();
		
				increaseBtn.addEventListener('click', function() {
					var currentFontSize = parseFloat(window.getComputedStyle(html).fontSize);
					var newFontSize = currentFontSize + 1;
		
					html.style.fontSize = newFontSize + 'px';
		
					// Guardar el nuevo tamaño de fuente en el almacenamiento local
					saveFontSize(newFontSize);
				});
		
				decreaseBtn.addEventListener('click', function() {
					var currentFontSize = parseFloat(window.getComputedStyle(html).fontSize);
					var newFontSize = currentFontSize - 1;
		
					html.style.fontSize = newFontSize + 'px';
		
					// Guardar el nuevo tamaño de fuente en el almacenamiento local
					saveFontSize(newFontSize);
				});
		
				document.addEventListener('dblclick', function() {
					html.style.fontSize = originalFontSize + 'px';
		
					// Eliminar el tamaño de fuente guardado del almacenamiento local
					localStorage.removeItem('fontSize');
				});
			});
		</script>
		

		<script src= "https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.all.min.js" ></script>
		
		{% if messages %}
			{% for m in messages %}
				<script>
					Swal.fire({
						position: 'center',
						icon: 'success',
						title: '¡Listo!',
						text:'{{m}}',
						showConfirmButton: false,
						timer: 1500
					})
				</script>
			{% endfor %}
		{% endif %}

		{% block js %}
		{% endblock js %}
		
	</body>
</html>
	